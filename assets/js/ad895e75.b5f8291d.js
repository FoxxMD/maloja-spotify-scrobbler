"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[315],{2645:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var i=n(4848),t=n(8453);const r={toc_min_heading_level:2,toc_max_heading_level:5},o=void 0,l={id:"FAQ",title:"FAQ",description:"Connection Issues",source:"@site/docs/FAQ.md",sourceDirName:".",slug:"/FAQ",permalink:"/multi-scrobbler/docs/FAQ",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/FAQ.md",tags:[],version:"current",frontMatter:{toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"tutorialSidebar",previous:{title:"Flatpak",permalink:"/multi-scrobbler/docs/development/flatpak"}},c={},a=[{value:"Connection Issues",id:"connection-issues",level:2},{value:"Plex/Tautulli/Jellyfin/Webscrobbler don&#39;t connect",id:"plextautullijellyfinwebscrobbler-dont-connect",level:3},{value:"Troubleshooting",id:"troubleshooting",level:4},{value:"Turn on Debug Logging",id:"turn-on-debug-logging",level:5},{value:"Check Host name and URL",id:"check-host-name-and-url",level:5},{value:"Check Firewall and Port Forwarding",id:"check-firewall-and-port-forwarding",level:5},{value:"Check Source Service Logs",id:"check-source-service-logs",level:5},{value:"Plex",id:"plex",level:6},{value:"Tautulli",id:"tautulli",level:6},{value:"Jellyfin",id:"jellyfin",level:6},{value:"Webscrobbler",id:"webscrobbler",level:6},{value:"Jellyfin has warnings about undefined or missing data",id:"jellyfin-has-warnings-about-undefined-or-missing-data",level:3},{value:"Jellyfin has warnings about missing headers",id:"jellyfin-has-warnings-about-missing-headers",level:3},{value:"Spotify/Deezer/LastFM won&#39;t authenticate",id:"spotifydeezerlastfm-wont-authenticate",level:3},{value:"Deezer is not working",id:"deezer-is-not-working",level:3},{value:"Youtube Music fails after some time",id:"youtube-music-fails-after-some-time",level:3},{value:"Configuration Issues",id:"configuration-issues",level:2},{value:"Config could not be parsed",id:"config-could-not-be-parsed",level:3},{value:"Scrobbling Issues",id:"scrobbling-issues",level:2},{value:"Last.fm does not scrobble tracks with multiple artists correctly",id:"lastfm-does-not-scrobble-tracks-with-multiple-artists-correctly",level:3},{value:"Jellyfin does not scrobble tracks with multiple artists correctly",id:"jellyfin-does-not-scrobble-tracks-with-multiple-artists-correctly",level:3},{value:"Google Cast track information is missing/incorrect or MS player has weird times",id:"google-cast-track-information-is-missingincorrect-or-ms-player-has-weird-times",level:3},{value:"Google Cast device does not track media",id:"google-cast-device-does-not-track-media",level:3},{value:"VLC is not scrobbling fields correctly",id:"vlc-is-not-scrobbling-fields-correctly",level:3},{value:"Youtube Music misses scrobbles",id:"youtube-music-misses-scrobbles",level:3}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,i.jsx)(s.h3,{id:"plextautullijellyfinwebscrobbler-dont-connect",children:"Plex/Tautulli/Jellyfin/Webscrobbler don't connect"}),"\n",(0,i.jsxs)(s.p,{children:["These sources are ",(0,i.jsx)(s.strong,{children:"ingress-based"})," which means that multi-scrobbler waits for the Plex/Tautulli/Jellyfin server (or Webscrobbler extension) to contact multi-scrobbler, as opposed to multi-scrobbler contacting them."]}),"\n",(0,i.jsx)(s.p,{children:"multi-scrobbler will log information about any server that connects to it for these services. In the logs it looks something like this:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"2023-02-22T10:55:56-05:00 info   : [Ingress - Plex  ] Received request from a new remote address: ::ffff:192.168.0.140 (UA: PlexMediaServer/1.24.5.5173-8dcc73a59)\n2023-02-22T10:55:56-05:00 info   : [Ingress - Plex  ] ::ffff:192.168.0.140 (UA: PlexMediaServer/1.24.5.5173-8dcc73a59) Received valid data from server examplePlex for the first time.\n2023-02-22T10:55:56-05:00 warn   : [Plex Request    ] Received valid Plex webhook payload but no Plex sources are configured\n"})}),"\n",(0,i.jsx)(s.p,{children:"It also logs if a server tries to connect to a URL that it does not recognize:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"2023-02-22T11:16:12-05:00 debug  : [App             ] Server received POST request from ::ffff:192.168.0.140 (UA: PlexMediaServer/1.24.5.5173-8dcc73a59) to unknown route: /plkex\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"So, if you do not see either of these in your logs then Plex/Tautulli/Jellyfin/Webscrobbler is not able to connect to your multi-scrobbler instance at all."})}),"\n",(0,i.jsx)(s.p,{children:"This is not something multi-scrobbler can fix and means you have an issue in your network."}),"\n",(0,i.jsx)(s.h4,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(s.p,{children:"Check or try all these steps before submitting an issue:"}),"\n",(0,i.jsx)(s.h5,{id:"turn-on-debug-logging",children:"Turn on Debug Logging"}),"\n",(0,i.jsxs)(s.p,{children:["First, turn on ",(0,i.jsx)(s.strong,{children:"debug"})," logging for multi-scrobbler by setting the environmental variable ",(0,i.jsx)(s.code,{children:"LOG_LEVEL=debug"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["using node ",(0,i.jsx)(s.code,{children:"LOG_LEVEL=debug ... node src/index.js"})]}),"\n",(0,i.jsxs)(s.li,{children:["using docker ",(0,i.jsx)(s.code,{children:"docker run -e LOG_LEVEL=debug ... foxxmd/multi-scrobbler"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Check the output for any additional information."}),"\n",(0,i.jsx)(s.h5,{id:"check-host-name-and-url",children:"Check Host name and URL"}),"\n",(0,i.jsxs)(s.p,{children:["The URLs examples in the ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/",children:"configuration"})," documentation assume you are running Plex/Tautulli/Jellyfin/Webscrobbler on the same server as multi-scrobbler. If these are not the same machine then you need to determine the IP address or domain name that multi-scrobbler is reachable at and use that instead of ",(0,i.jsx)(s.code,{children:"localhost"})," when configuring these sources. ",(0,i.jsx)(s.strong,{children:"This is likely the same host name that you would use to access the web interface for multi-scrobbler."})]}),"\n",(0,i.jsxs)(s.p,{children:["EX ",(0,i.jsx)(s.code,{children:"http://localhost:9078/plex"})," -> ",(0,i.jsx)(s.code,{children:"http://192.168.0.140:9078/plex"})]}),"\n",(0,i.jsx)(s.h5,{id:"check-firewall-and-port-forwarding",children:"Check Firewall and Port Forwarding"}),"\n",(0,i.jsxs)(s.p,{children:["If the machine multi-scrobbler is running on has a firewall ensure that port ",(0,i.jsx)(s.strong,{children:"9078"})," is open. Or if it is in another network entirely make sure your router is forwarding this port and it is open to the correct machine."]}),"\n",(0,i.jsx)(s.h5,{id:"check-source-service-logs",children:"Check Source Service Logs"}),"\n",(0,i.jsx)(s.p,{children:"Plex/Tautulli/Jellyfin all have logs that will log if they cannot connect to multi-scrobbler. Check these for further information."}),"\n",(0,i.jsx)(s.h6,{id:"plex",children:"Plex"}),"\n",(0,i.jsx)(s.p,{children:"Settings -> Manage -> Console"}),"\n",(0,i.jsx)(s.h6,{id:"tautulli",children:"Tautulli"}),"\n",(0,i.jsx)(s.p,{children:"Check the command-line output of the application or docker logs."}),"\n",(0,i.jsx)(s.h6,{id:"jellyfin",children:"Jellyfin"}),"\n",(0,i.jsx)(s.p,{children:"Administration -> Dashboard -> Advanced -> Logs"}),"\n",(0,i.jsx)(s.h6,{id:"webscrobbler",children:"Webscrobbler"}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://github.com/web-scrobbler/web-scrobbler/wiki/Debug-the-extension",children:"Debugging the extension"})," to get logs which should have information about failed requests."]}),"\n",(0,i.jsx)(s.h3,{id:"jellyfin-has-warnings-about-undefined-or-missing-data",children:"Jellyfin has warnings about undefined or missing data"}),"\n",(0,i.jsx)(s.p,{children:"Make sure you have"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#jellyfin",children:"Configured the webhook plugin correctly"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Checked the ",(0,i.jsx)(s.strong,{children:"Send All Properties(ignores template)"})," option in the webhook settings and ",(0,i.jsx)(s.strong,{children:"Saved"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["multi-scrobbler is known to work on Jellyfin ",(0,i.jsx)(s.code,{children:"10.8.9"})," with Webhook version ",(0,i.jsx)(s.code,{children:"11.0.0.0"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["You can verify the payload sent from the webhook by modifying your jellyfin configuration to include ",(0,i.jsx)(s.code,{children:"logPayload: true"})," which will output the raw payload to DEBUG level logging:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "name": "MyJellyfin",\n    "clients": [],\n    "data": {\n      "users": ["FoxxMD"]\n    },\n    "options": {\n      "logPayload": true\n    }\n  }\n]\n'})}),"\n",(0,i.jsx)(s.p,{children:"If your issue persists and you open an Issue for it please include the raw payload logs in your report."}),"\n",(0,i.jsx)(s.h3,{id:"jellyfin-has-warnings-about-missing-headers",children:"Jellyfin has warnings about missing headers"}),"\n",(0,i.jsx)(s.p,{children:"If you experience issues trying to scrobble with Jellyfin and find this in your MS logs"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"[API] Jellyfin is not sending a request with valid headers...\n"})}),"\n",(0,i.jsx)(s.p,{children:"A workaround that may fix this:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["In Webhook settings:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#jellyfin",children:"In the webhook you have already configured..."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Add Request Header...","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Key:"})," ",(0,i.jsx)(s.code,{children:"Content-Type"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Value:"})," ",(0,i.jsx)(s.code,{children:"application/json"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"Then Save"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"spotifydeezerlastfm-wont-authenticate",children:"Spotify/Deezer/LastFM won't authenticate"}),"\n",(0,i.jsxs)(s.p,{children:["Ensure any ",(0,i.jsx)(s.strong,{children:"client id"})," or ",(0,i.jsx)(s.strong,{children:"secrets"})," are correct in your configuration."]}),"\n",(0,i.jsx)(s.p,{children:"The callback/redirect URL for these services must be:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["the same address you would use to access the multi-scrobbler web interface","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"the web-interface must be accessible from the browser you are completing authentication from."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If multi-scrobbler is not running on the same machine your browser is on then the default/example addresses (",(0,i.jsx)(s.code,{children:"http://localhost..."}),") ",(0,i.jsx)(s.strong,{children:"will not work."})," You must determine the address you can reach the web interface at (such as ",(0,i.jsx)(s.code,{children:"http://192.168.0.140:9078"}),") then use that in place of ",(0,i.jsx)(s.code,{children:"localhost"})," in the callback URLs."]}),"\n",(0,i.jsxs)(s.p,{children:["EX ",(0,i.jsx)(s.code,{children:"http://localhost:9078/lastfm/callback"})," -> ",(0,i.jsx)(s.code,{children:"http://192.168.0.220:9078/lastfm/callback"})]}),"\n",(0,i.jsx)(s.h3,{id:"deezer-is-not-working",children:"Deezer is not working"}),"\n",(0,i.jsxs)(s.p,{children:["Deezer has discontinued support for their API and the Deezer Source is now ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#deezer",children:(0,i.jsx)(s.strong,{children:"deprecated."})})," See ",(0,i.jsx)(s.a,{href:"https://github.com/FoxxMD/multi-scrobbler/issues/175#issuecomment-2296776625",children:"this issue for more discussion."})]}),"\n",(0,i.jsx)(s.h3,{id:"youtube-music-fails-after-some-time",children:"Youtube Music fails after some time"}),"\n",(0,i.jsxs)(s.p,{children:["The Youtube Music library relies on scraping the YTM site (pretending to be a browser) by using cookies/auth from your actual browser. It does its best to keep these up to date but since this is not an official way to access the service YTM may invalidate your access ",(0,i.jsx)(s.em,{children:"to the authenticated session"})," at any time. How this is triggered is unknown and not something multi-scrobbler can control."]}),"\n",(0,i.jsxs)(s.p,{children:["If you see errors in multi-scrobbler for YTM that contain ",(0,i.jsx)(s.strong,{children:"401"})," or ",(0,i.jsx)(s.strong,{children:"403"})," like"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Error: Could not send the specified request to browse. Status code: 401\n"})}),"\n",(0,i.jsxs)(s.p,{children:["then YTM has invalidated your access. ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#youtube-music",children:"Follow the YTM instructions to retrieve a new set of cookies for multi-scrobbler"})," and then restart MS to potentially resolve the problem. See ",(0,i.jsx)(s.a,{href:"https://github.com/FoxxMD/multi-scrobbler/issues/158",children:"this issue"})," for further discussion of the problem."]}),"\n",(0,i.jsx)(s.h2,{id:"configuration-issues",children:"Configuration Issues"}),"\n",(0,i.jsx)(s.h3,{id:"config-could-not-be-parsed",children:"Config could not be parsed"}),"\n",(0,i.jsx)(s.p,{children:"If you see something like this in your logs:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"2023-02-19T10:05:42-06:00 warn   : [App] App config file exists but could not be parsed!\n2023-02-19T10:05:42-06:00 error  : [App] Exited with uncaught error\n2023-02-19T10:05:42-06:00 error  : [App] Error: config.json could not be parsed\n"})}),"\n",(0,i.jsxs)(s.p,{children:["It means the JSON in your configuration file is not valid. Copy and paste your configuration into a site like ",(0,i.jsx)(s.a,{href:"https://jsonlint.com/",children:"JSONLint"})," to find out where errors you have and fix them."]}),"\n",(0,i.jsx)(s.h2,{id:"scrobbling-issues",children:"Scrobbling Issues"}),"\n",(0,i.jsx)(s.h3,{id:"lastfm-does-not-scrobble-tracks-with-multiple-artists-correctly",children:"Last.fm does not scrobble tracks with multiple artists correctly"}),"\n",(0,i.jsxs)(s.p,{children:["This is a limitation of the ",(0,i.jsx)(s.a,{href:"https://www.last.fm/api/show/track.scrobble",children:"Last.fm API"})," where the ",(0,i.jsx)(s.strong,{children:"artist"}),' field is only one string and Last.fm does not recognize (play well) with "combined" artists.']}),"\n",(0,i.jsxs)(s.p,{children:["Multi-scrobbler works the same was the official Spotify-Last.fm integration works -- it only scrobbles the ",(0,i.jsx)(s.strong,{children:"first"})," artist on a multi-artist track."]}),"\n",(0,i.jsx)(s.h3,{id:"jellyfin-does-not-scrobble-tracks-with-multiple-artists-correctly",children:"Jellyfin does not scrobble tracks with multiple artists correctly"}),"\n",(0,i.jsxs)(s.p,{children:["This is a limitation caused by the ",(0,i.jsx)(s.a,{href:"https://github.com/FoxxMD/multi-scrobbler/issues/70#issuecomment-1443804712",children:"Jellyfin webhook plugin"})," only sending the first artist to multi-scrobbler. This issues needs to be ",(0,i.jsx)(s.a,{href:"https://github.com/jellyfin/jellyfin-plugin-webhook/issues/166",children:"fixed upstream on the Jellyfin webhook repository."})]}),"\n",(0,i.jsx)(s.h3,{id:"google-cast-track-information-is-missingincorrect-or-ms-player-has-weird-times",children:"Google Cast track information is missing/incorrect or MS player has weird times"}),"\n",(0,i.jsxs)(s.p,{children:["The Google Cast integration relies on a few common fields in the data it receives from your casting device. Every platform that can cast (Spotify, Pandora, etc...) ",(0,i.jsx)(s.em,{children:"should"})," use these fields the same but there are slight differences between their implementations that may confuse multi-scrobbler. Specific platforms may also return more information in non-common fields that are undocumented."]}),"\n",(0,i.jsxs)(s.p,{children:["To diagnose these issues you ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#cast-troubleshooting",children:(0,i.jsx)(s.strong,{children:"must enable payload logging"})})," for your google cast Source, run MS, and then include logs with this output from that run. Without the raw data logged from your cast device it will be nearly impossible to resolve your issue."]}),"\n",(0,i.jsx)(s.h3,{id:"google-cast-device-does-not-track-media",children:"Google Cast device does not track media"}),"\n",(0,i.jsxs)(s.p,{children:["It is likely the app playing on the cast device is incorrectly reporting the media type as ",(0,i.jsx)(s.strong,{children:"not music"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"MS logs will tell you what type the media is reported as with lines like:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"My Artist - Example Track has 'unknown' media type and allowUnknownMedia=false, will not track\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Refer to ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#allow-unknown-media-type",children:"Allow Unknown Media Type"})," section to fix this"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"My Artist - Example Track has 'movie' media type so will not track\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Refer to ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#forcing-media-tracking",children:"Force Media Tracking"})," section to fix this"]}),"\n",(0,i.jsx)(s.h3,{id:"vlc-is-not-scrobbling-fields-correctly",children:"VLC is not scrobbling fields correctly"}),"\n",(0,i.jsxs)(s.p,{children:["Before reporting an issue turn on metadata logging in the MS VLC configuration, ",(0,i.jsx)(s.a,{href:"/multi-scrobbler/docs/configuration/#vlc-information-reporting",children:"see the VLC documentation."})]}),"\n",(0,i.jsx)(s.h3,{id:"youtube-music-misses-scrobbles",children:"Youtube Music misses scrobbles"}),"\n",(0,i.jsxs)(s.p,{children:["In order for multi-scrobbler to accurately determine if a song has been scrobbled it needs ",(0,i.jsx)(s.strong,{children:"a source of truth."}),' For YTM this is a "history" list scraped from the YTM website. Unfortunately, the data in this list can be (often) inconsistent which makes it hard for multi-scrobbler to "trust" that it is correct and determine when/if new scrobbles occur. This inconsistency is not something multi-scrobbler can control -- it is a side-effect of having to use an unofficial method to access YTM (scraping).']}),"\n",(0,i.jsx)(s.p,{children:'In order to compensate for this multi-scrobbler resets when it considers this list the "source of truth" based on if the list changes in an inconsistent way between consecutive checks. New scrobbles can only be detected when this list is "OK" as a source of truth for N+1 checks. Therefore, any new tracks that appear when the list is inconsistent will be ignored.'}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://github.com/FoxxMD/multi-scrobbler/issues/156#issuecomment-2312533486",children:"this issue"})," for further discussion and a more detailed explanation of why this is happening and how multi-scrobbler compensates for it."]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);