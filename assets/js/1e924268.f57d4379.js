"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[232],{9084:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});var s=i(4848),r=i(8453);const o={sidebar_position:1,title:"Overview"},l="Installation",t={id:"installation/installation",title:"Overview",description:"After installation see service.md to configure multi-scrobbler to run automatically in the background.",source:"@site/docs/installation/installation.md",sourceDirName:"installation",slug:"/installation/",permalink:"/multi-scrobbler/docs/installation/",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/installation/installation.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Overview"},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/multi-scrobbler/docs/category/installation"},next:{title:"As a Service",permalink:"/multi-scrobbler/docs/installation/service"}},a={},c=[{value:"Nodejs",id:"nodejs",level:2},{value:"Rollup build error",id:"rollup-build-error",level:4},{value:"Usage Examples",id:"usage-examples",level:3},{value:"Using file-based configuration",id:"using-file-based-configuration",level:4},{value:"Using env-based configuration",id:"using-env-based-configuration",level:4},{value:"Flatpak",id:"flatpak",level:2},{value:"Usage Examples",id:"usage-examples-1",level:3},{value:"Using file-based configuration",id:"using-file-based-configuration-1",level:4},{value:"Using env-based configuration",id:"using-env-based-configuration-1",level:4},{value:"Docker",id:"docker",level:2},{value:"Storage",id:"storage",level:4},{value:"Networking",id:"networking",level:4},{value:"Base URL",id:"base-url",level:5},{value:"Other",id:"other",level:4},{value:"Linux Host",id:"linux-host",level:3},{value:"Docker Usage Examples",id:"docker-usage-examples",level:2},{value:"Using env-based configuration",id:"using-env-based-configuration-2",level:3},{value:"Using file-based configuration",id:"using-file-based-configuration-2",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(n.p,{children:["After installation see ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/installation/service",children:"service.md"})," to configure multi-scrobbler to run automatically in the background."]}),"\n",(0,s.jsx)(n.h2,{id:"nodejs",children:"Nodejs"}),"\n",(0,s.jsx)(n.p,{children:"Clone this repository somewhere and then install from the working directory"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/FoxxMD/multi-scrobbler.git .\ncd multi-scrobbler\nnvm use # optional, to set correct Node version\nnpm install\nnpm run start\n"})}),"\n",(0,s.jsx)(n.h4,{id:"rollup-build-error",children:"Rollup build error"}),"\n",(0,s.jsxs)(n.p,{children:["During building if you encounter an error like: ",(0,s.jsx)(n.code,{children:'Your current platform "XXX" and architecture "XXX" combination is not yet supported by the native Rollup build.'})]}),"\n",(0,s.jsxs)(n.p,{children:["Modify ",(0,s.jsx)(n.code,{children:"overrides"})," in ",(0,s.jsx)(n.code,{children:"package.json"})," to use ",(0,s.jsx)(n.code,{children:"@rollup/wasm-node"})," as a drop-in replacement for rollup:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"overrides": {\n  "spotify-web-api-node": {\n    "superagent": "$superagent"\n  }\n  "vite": {\n    "rollup": "npm:@rollup/wasm-node@^4.9.6"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/issues/135#issuecomment-1927080260",children:"this issue"})," for more detail."]}),"\n",(0,s.jsx)(n.h3,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The web UI and API is served on port ",(0,s.jsx)(n.code,{children:"9078"}),". This can be modified using the ",(0,s.jsx)(n.code,{children:"PORT"})," environmental variable."]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"using-file-based-configuration",children:["Using ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#file-based-configuration",children:"file-based"})," configuration"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"npm run start\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"using-env-based-configuration",children:["Using ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#env-based-configuration",children:"env-based"})," configuration"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'SPOTIFY_CLIENT_ID=yourId SPOTIFY_CLIENT_SECRET=yourSecret MALOJA_URL="http://domain.tld" node src/index.js\n'})}),"\n",(0,s.jsx)(n.h2,{id:"flatpak",children:"Flatpak"}),"\n",(0,s.jsxs)(n.p,{children:["You must have ",(0,s.jsx)(n.a,{href:"https://flatpak.org/",children:"Flatpak"})," installed on your system."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"flatpak install flathub io.github.foxxmd.multiscrobbler\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," Flatpak users have experienced issues when using multi-scrobbler as a long-running process. Due to the relative difficulty in debugging issues with flatpak installations it is recommended:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["to use a ",(0,s.jsx)(n.a,{href:"#docker",children:"Docker"})," installation if possible or"]}),"\n",(0,s.jsxs)(n.li,{children:["only if you need access to host-level resources like dbus for ",(0,s.jsx)(n.a,{href:"https://foxxmd.github.io/multi-scrobbler/docs/configuration#mpris",children:"MPRIS"})," and cannot run a ",(0,s.jsx)(n.a,{href:"#nodejs",children:"nodejs"})," installation"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"usage-examples-1",children:"Usage Examples"}),"\n",(0,s.jsxs)(n.h4,{id:"using-file-based-configuration-1",children:["Using ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#file-based-configuration",children:"file-based"})," configuration"]}),"\n",(0,s.jsxs)(n.p,{children:["The config directory for multi-scrobbler as a flatpak can be found under ",(0,s.jsx)(n.code,{children:"/home/YourUser/.var/app/io.github.foxxmd.multiscrobbler/config"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"flatpak run io.github.foxxmd.multiscrobbler\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"using-env-based-configuration-1",children:["Using ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#env-based-configuration",children:"env-based"})," configuration"]}),"\n",(0,s.jsxs)(n.p,{children:["There are a few ",(0,s.jsx)(n.a,{href:"https://ardasevinc.dev/launch-flatpak-apps-with-custom-args-and-environment-variables",children:"options for running flatpak applications with temporary or permanent environmental variables."})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'flatpak run --env=SPOTIFY_CLIENT_ID=yourId --envSPOTIFY_CLIENT_SECRET=yourSecret --env=MALOJA_URL="http://domain.tld" io.github.foxxmd.multiscrobbler\n'})}),"\n",(0,s.jsx)(n.h2,{id:"docker",children:"Docker"}),"\n",(0,s.jsx)(n.p,{children:"Cross-platform images are built for x86 (Intel/AMD) and ARM64 (IE Raspberry Pi)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://hub.docker.com/r/foxxmd/multi-scrobbler",children:"Dockerhub"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"docker.io/foxxmd/multi-scrobbler:latest\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/FoxxMD/multi-scrobbler/pkgs/container/multi-scrobbler",children:"Github Packages"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ghcr.io/foxxmd/multi-scrobbler:latest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Or use the provided ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(9608).A+"",children:"docker-compose.yml"})," after modifying it to fit your configuration."]}),"\n",(0,s.jsx)(n.p,{children:"Recommended configuration steps for docker or docker-compose usage:"}),"\n",(0,s.jsx)(n.h4,{id:"storage",children:"Storage"}),"\n",(0,s.jsxs)(n.p,{children:["You ",(0,s.jsx)(n.strong,{children:"must"})," bind a host directory into the container for storing configurations and credentials. Otherwise, these will be lost when the container is updated."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.a,{href:"https://docs.docker.com/storage/bind-mounts/#start-a-container-with-a-bind-mount",children:["Using ",(0,s.jsx)(n.code,{children:"-v"})," method for docker"]}),": ",(0,s.jsx)(n.code,{children:"-v /path/on/host/config:/config"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-file-v3/#short-syntax-3",children:"Using docker-compose"}),": ",(0,s.jsx)(n.code,{children:"- /path/on/host/config:/config"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"networking",children:"Networking"}),"\n",(0,s.jsxs)(n.p,{children:["If you are using a ",(0,s.jsx)(n.a,{href:"https://www.appsdeveloperblog.com/docker-networking-bridging-host-and-overlay/",children:"bridge network"})," (default docker setup) you ",(0,s.jsx)(n.strong,{children:"must"})," map a port to the container in order to access the dashboard and use MS with some sources (Plex, Jellyfin)."]}),"\n",(0,s.jsxs)(n.p,{children:["The default container port is ",(0,s.jsx)(n.code,{children:"9078"}),". To map container to host port:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["With ",(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/run/#publish",children:"docker"}),": ",(0,s.jsx)(n.code,{children:"-p 9078:9078"})," (first port is the port on the host to use)"]}),"\n",(0,s.jsxs)(n.li,{children:["With ",(0,s.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-file-v3/#short-syntax-1",children:"docker-compose"}),": ",(0,s.jsx)(n.code,{children:'- "9078:9078"'})]}),"\n"]}),"\n",(0,s.jsx)(n.h5,{id:"base-url",children:"Base URL"}),"\n",(0,s.jsx)(n.p,{children:"Optionally, when"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["using a ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/",children:"Source or Client"}),' that has a "Redirect URI" that you have not explicitly defined']}),"\n",(0,s.jsxs)(n.li,{children:["and","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"using a bridge network or"}),"\n",(0,s.jsx)(n.li,{children:"installing MS on a different machine than the one used to view the dashboard"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["set the ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#base-url",children:"Base URL"})," as the IP of the host machine. (This is the IP you would use to view the dashboard in a browser)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["With docker: ",(0,s.jsx)(n.code,{children:'-e BASE_URL="http://hostMachineIP"'})," (first port is the port on the host to use)"]}),"\n",(0,s.jsxs)(n.li,{children:["With docker-compose: ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(9608).A+"",children:"see comments in docker-compose.yml"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"other",children:"Other"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["(Optionally) set the ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones",children:"timezone"})," for the container using the environmental variable ",(0,s.jsx)(n.code,{children:"TZ"})," (",(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/run/#env",children:"docker"}),") (",(0,s.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-file-v3/#environment",children:"docker-compose"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"linux-host",children:"Linux Host"}),"\n",(0,s.jsx)(n.p,{children:"If you are"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["using ",(0,s.jsx)(n.a,{href:"https://developers.redhat.com/blog/2020/09/25/rootless-containers-with-podman-the-basics#why_podman_",children:"rootless containers with Podman"})]}),"\n",(0,s.jsx)(n.li,{children:"running docker on MacOS or Windows"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["this ",(0,s.jsx)(n.strong,{children:"DOES NOT"})," apply to you."]}),"\n",(0,s.jsxs)(n.p,{children:["If you are running Docker on a ",(0,s.jsx)(n.strong,{children:"Linux Host"})," you must specify ",(0,s.jsx)(n.code,{children:"user:group"})," permissions of the user who owns the ",(0,s.jsx)(n.strong,{children:"configuration directory"})," on the host to avoid ",(0,s.jsx)(n.a,{href:"https://ikriv.com/blog/?p=4698",children:"docker file permission problems."})," These can be specified using the ",(0,s.jsxs)(n.a,{href:"https://docs.linuxserver.io/general/understanding-puid-and-pgid",children:["environmental variables ",(0,s.jsx)(n.strong,{children:"PUID"})," and ",(0,s.jsx)(n.strong,{children:"PGID"}),"."]})]}),"\n",(0,s.jsx)(n.p,{children:"To get the UID and GID for the current user run these commands from a terminal:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"id -u"})," -- prints UID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"id -g"})," -- prints GID"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"docker-usage-examples",children:"Docker Usage Examples"}),"\n",(0,s.jsxs)(n.p,{children:["If installing on a different machine make sure all redirect URIs are defined or that you have set a ",(0,s.jsx)(n.a,{href:"#base-url",children:"Base URL"}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"using-env-based-configuration-2",children:["Using ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#env-based-configuration",children:"env-based"})," configuration"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'docker run -e "SPOTIFY_CLIENT_ID=yourId" -e "SPOTIFY_CLIENT_SECRET=yourSecret" -e "MALOJA_URL=http://domain.tld" -e "MALOJA_API_KEY=1234" -e "PUID=1000" -e "PGID=1000" -p 9078:9078 -v /path/on/host/config:/config foxxmd/multi-scrobbler\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"using-file-based-configuration-2",children:["Using ",(0,s.jsx)(n.a,{href:"/multi-scrobbler/docs/configuration/#file-based-configuration",children:"file-based"})," configuration"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'docker run -e "PUID=1000" -e "PGID=1000" -p 9078:9078 -v /path/on/host/config:/config foxxmd/multi-scrobbler\n'})}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(9608).A+"",children:"docker-compose.yml"})," file for how to use with docker-compose."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},9608:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/files/docker-compose-65943d0d0764e39e8475afb3c05cb407.yml"},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);